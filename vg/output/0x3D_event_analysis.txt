================================================================================
0x3D EVENT ANALYSIS - VG REPLAY BINARY REVERSE ENGINEERING
================================================================================
Replay: item buy test
Replay ID: a8d06624-352e-4897-b920-2cdbafdb48ab-50361b75-aa42-41b7-ac17-8f252350a313
Analysis Date: 2026-02-09
Total Frames: 7

================================================================================
EXECUTIVE SUMMARY
================================================================================

0x3D is NOT a primary item purchase event. It appears to be a SECONDARY or
RELATED event that occurs:
  - Sometimes alongside item purchases (Frame 5, 6)
  - Sometimes independently without purchases (Frame 3)
  - NOT always when purchases occur (Frame 0 has NO 0x3D events)

KEY FINDING: 0x3D payload byte[1] can contain item ID (confirmed in Frame 6)

================================================================================
SECTION 1: EVENT COUNT COMPARISON
================================================================================

Frame | Known Purchases | 0xBC Count | 0x3D Count | Pattern
---------------------------------------------------------------------------
  0   | 2 (101, 102)    |     2      |     0      | Purchase without 0x3D
  1   | 0               |     0      |     0      | No activity
  2   | 0               |     0      |     0      | No activity
  3   | 0               |     0      |     1      | 0x3D without purchase!
  4   | 0               |     0      |     0      | No activity
  5   | 2 (111, 103)    |     2      |     3      | Purchase with 0x3D (3!)
  6   | 1 (121)         |     1      |     1      | Purchase with 0x3D (1)

OBSERVATIONS:
  - 0xBC count always matches purchase count (5 purchases = 5 x 0xBC events)
  - 0x3D count does NOT match purchase count
  - Total: 5 purchases, 5 x 0xBC events, 5 x 0x3D events (coincidence?)
  - Frame 0: 2 purchases but ZERO 0x3D events
  - Frame 3: 0 purchases but ONE 0x3D event
  - Frame 5: 2 purchases but THREE 0x3D events

CONCLUSION: 0x3D is NOT a 1:1 purchase event like 0xBC

================================================================================
SECTION 2: EVENT TIMING AND ORDERING
================================================================================

Frame 0 (2 purchases: Weapon Blade, Book of Eulogies):
  @0x002D35 0xBC: f32[0]=    0.85 f32[4]=    0.00
  @0x002E2D 0xBC: f32[0]=    0.85 f32[4]=    0.00
  (No 0x3D events in this frame)

Frame 3 (0 purchases):
  @0x000CEE 0x3D: f32[0]=  754.40 f32[4]=  512.01
  (No 0xBC events in this frame)

Frame 5 (2 purchases: Heavy Steel, Swift Shooter):
  @0x0016BC 0x3D: f32[0]=  257.95 f32[4]=  128.50
  @0x001A20 0x3D: f32[0]= 1509.50 f32[4]=  512.01
  @0x001D71 0xBC: f32[0]=  877.37 f32[4]=  515.00
  @0x001F23 0xBC: f32[0]= 1278.37 f32[4]=  515.00
  @0x002287 0x3D: f32[0]=  558.71 f32[4]=  515.00

Frame 6 (1 purchase: Sorrowblade):
  @0x001078 0xBC: f32[0]= 2039.59 f32[4]=  515.00
  @0x00136B 0x3D: f32[0]=  953.58 f32[4]=  515.00

TIMING OBSERVATIONS:
  - In Frame 5: 0x3D events appear BEFORE and AFTER 0xBC events
  - In Frame 6: 0x3D event appears AFTER 0xBC event
  - File offsets show interleaved pattern, not strictly sequential

================================================================================
SECTION 3: PAYLOAD STRUCTURE ANALYSIS
================================================================================

All 0x3D events have similar payload structure:

Frame 3, Event 0 @0x000CEE:
  Hex: CA 99 3C 44 5C 00 00 44 5C 00 00 00 00 00 00 00 00 00 00 40 60 00 00 00
  [0:4]  float32 = 754.40
  [4:8]  float32 = 512.01

Frame 5, Event 0 @0x0016BC:
  Hex: FC F9 80 43 ED 80 00 43 ED 80 00 00 00 00 00 00 00 00 00 40 60 00 00 00
  [0:4]  float32 = 257.95
  [4:8]  float32 = 128.50

Frame 5, Event 1 @0x001A20:
  Hex: FA AF BC 44 5C 00 00 44 5C 00 00 00 00 00 00 00 00 00 00 40 60 00 00 00
  [0:4]  float32 = 1509.50
  [4:8]  float32 = 512.01

Frame 5, Event 2 @0x002287:
  Hex: 5C AD 0B 44 0F C0 00 44 0F C0 00 00 00 00 00 00 00 00 00 40 60 00 00 00
  [0:4]  float32 = 558.71
  [4:8]  float32 = 515.00

Frame 6, Event 0 @0x00136B:
  Hex: 26 65 6E 44 0F C0 00 44 0F C0 00 00 00 00 00 00 00 00 00 40 60 00 00 00
  [0:4]  float32 = 953.58
  [4:8]  float32 = 515.00
  [1]    byte    = 0x65 (101) <-- ITEM ID FOUND!

PAYLOAD PATTERN:
  - Bytes [0:4]: IEEE 754 float32 (various values)
  - Bytes [4:8]: IEEE 754 float32 (128.50, 512.01, or 515.00)
  - Bytes [8+]: Mostly zeros with some fixed patterns (0x40 60 00... 0x3F 80 00...)

COMMON FLOAT VALUES AT [4:8]:
  - 128.50: appears in Frame 5, Event 0
  - 512.01: appears in Frame 3, Frame 5 Event 1
  - 515.00: appears in Frame 5 Event 2, Frame 6, and many 0xBC events

================================================================================
SECTION 4: ITEM ID PRESENCE IN 0x3D PAYLOADS
================================================================================

Direct search for item IDs (101, 102, 103, 111, 121) in 0x3D payloads:

Frame 3, Event 0 @0x000CEE:
  - No direct item ID matches in payload

Frame 5, Event 0 @0x0016BC:
  - No direct item ID matches in payload

Frame 5, Event 1 @0x001A20:
  - No direct item ID matches in payload

Frame 5, Event 2 @0x002287:
  - No direct item ID matches in payload

Frame 6, Event 0 @0x00136B:
  - Item 101 found at payload[1] (1-byte)
  - Hex context: 26 [65] 6E 44 (0x65 = 101 decimal)

DETAILED FRAME 6 0x3D EVENT:
  Full event structure:
    0x00136B: [00 00] [00 00] [3D] 26 65 6E 44 0F C0 00 44 0F C0 00 00
              └─┬──┘ └─┬──┘  └┬┘  └──────┬──────┘
                │      │      │         Payload
            Entity ID  Pad  Action

  Payload breakdown:
    [0]    0x26 (38)
    [1]    0x65 (101) <-- Item ID: Weapon Blade
    [2:3]  0x6E44 (17518 LE uint16)
    [0:4]  953.58 (float32)
    [4:8]  515.00 (float32)

ITEM ID IN PROXIMITY (±300 bytes):
  Frame 3: Item 102 found 8 times near 0x3D event
  Frame 5, Event 0: Item 102 found 3 times nearby
  Frame 5, Event 1: Item 101 found 2 times nearby
  Frame 5, Event 2: Item 102 found 10 times nearby
  Frame 6: Item 101 found at +6 bytes (inside payload!)

================================================================================
SECTION 5: COMPARISON WITH 0xBC EVENTS
================================================================================

Structural Similarities:
  - Both use Entity ID 0 (00 00)
  - Both have float32 values in payload
  - Both appear in purchase frames

Key Differences:

  Count Relationship:
    0xBC: Always 1:1 with purchases (5 purchases = 5 events)
    0x3D: Not 1:1 (5 purchases ≠ 5 events distribution)

  Frame Distribution:
    0xBC: Only in purchase frames (0, 5, 6)
    0x3D: In frames 3, 5, 6 (including non-purchase frame 3)

  Payload Structure:
    0xBC: Consistent structure across all events
    0x3D: Similar but with variations in float values

  Item ID Encoding:
    0xBC: Item ID NOT in payload (confirmed by previous analysis)
    0x3D: Item ID CAN appear in payload[1] (Frame 6 example)

================================================================================
SECTION 6: HYPOTHESIS EVALUATION
================================================================================

HYPOTHESIS 1: "0x3D is an item purchase confirmation event"
  Status: REJECTED
  Evidence:
    - Frame 0 has 2 purchases but 0 x 0x3D events
    - Frame 3 has 0 purchases but 1 x 0x3D event
    - Count mismatch (not 1:1)

HYPOTHESIS 2: "0x3D is a shop interaction event (not purchase-specific)"
  Status: PLAUSIBLE
  Evidence:
    - Appears in Frame 3 with no purchases (shop visit?)
    - Appears alongside purchases in Frames 5, 6
    - Could represent opening shop, browsing, or other UI interaction
  Counter-evidence:
    - Why doesn't it appear in Frame 0 if purchases happened?

HYPOTHESIS 3: "0x3D is a time-delayed or batched acknowledgement"
  Status: POSSIBLE
  Evidence:
    - Frame 0 purchases (early game) might not trigger immediate 0x3D
    - Frame 3's 0x3D could be delayed response to earlier activity
  Counter-evidence:
    - No clear timing pattern to support this

HYPOTHESIS 4: "0x3D relates to item ownership/inventory state"
  Status: MOST PLAUSIBLE
  Evidence:
    - Payload[1] can contain item ID (Frame 6: 0x65 = item 101)
    - Float values might represent item properties or timestamps
    - Not 1:1 with purchases suggests state update rather than transaction
  Supporting observations:
    - Frame 5 has 3 x 0x3D for 2 purchases (state updates?)
    - Frame 6 has direct item ID in payload

HYPOTHESIS 5: "0x3D is an item sell/removal event"
  Status: UNLIKELY
  Evidence:
    - Test replay is "item buy test" (no selling expected)
    - Event count doesn't match purchase pattern
  Counter-evidence:
    - Frame 3's lone 0x3D could be item removal/consumption

================================================================================
SECTION 7: RELATIONSHIP WITH 0xBC
================================================================================

Observed Patterns:

  Co-occurrence:
    - Frames 5 and 6: Both 0xBC and 0x3D present
    - Frame 0: Only 0xBC present (no 0x3D)
    - Frame 3: Only 0x3D present (no 0xBC)

  Timing/Ordering:
    - When both present, 0x3D can appear before OR after 0xBC
    - No strict sequential requirement

  Payload Similarity:
    - Both use float32 values
    - 0x3D float[4:8] = 515.00 matches many 0xBC events
    - Suggests shared coordinate/position system?

  Count Relationship:
    - 0xBC: Always equals purchase count (definitive purchase marker)
    - 0x3D: Variable count (supplementary event)

CONCLUSION:
  - 0xBC = PRIMARY item purchase transaction event
  - 0x3D = SECONDARY event (inventory update, shop state, or item effect)
  - 0x3D is NOT required for purchases (Frame 0 proves this)
  - 0x3D can occur without purchases (Frame 3 proves this)

================================================================================
SECTION 8: PAYLOAD FIELD INTERPRETATION
================================================================================

Based on Frame 6 0x3D event analysis:

  Byte Range | Type     | Value Example | Interpretation
  ---------------------------------------------------------------------------
  [0:4]      | float32  | 953.58        | Unknown (time, position X, or state)
  [1]        | uint8    | 0x65 (101)    | Item ID (CONFIRMED in Frame 6)
  [4:8]      | float32  | 515.00        | Unknown (position Y, price, or state)
  [8:12]     | ?        | 00 00 00 00   | Zero padding or unused
  [16:20]    | ?        | 40 60 00 00   | Fixed pattern (2.0 float?)
  [24:28]    | ?        | 00 00 00 00   | Zero padding
  [32:36]    | ?        | 3F 80 00 00   | Fixed pattern (1.0 float?)

NOTE: Payload[1] contains item ID in at least Frame 6. This may not be
consistent across all 0x3D events, as other frames didn't show this pattern.

The float values (953.58, 515.00) are similar to 0xBC coordinate-like values,
suggesting possible spatial/positional data.

================================================================================
SECTION 9: CONCLUSIONS
================================================================================

DEFINITIVE FINDINGS:

1. 0x3D is NOT a primary item purchase event
   - 0xBC remains the confirmed purchase event (1:1 with purchases)
   - 0x3D has irregular occurrence pattern

2. 0x3D can contain item ID in payload
   - Confirmed: Frame 6, payload[1] = 0x65 (item 101)
   - Location: Second byte of payload (offset +1 from action byte)
   - Not consistent across all 0x3D events

3. 0x3D appears in both purchase and non-purchase contexts
   - Frame 3: 0x3D without purchase
   - Frames 5, 6: 0x3D alongside purchases
   - Frame 0: Purchase without 0x3D

4. Event count relationship
   - 0xBC: 1:1 with purchases (reliable)
   - 0x3D: Variable (unreliable for purchase detection)

LIKELY INTERPRETATIONS (ranked by plausibility):

1. Inventory state update event
   - Updates item ownership or inventory UI
   - Triggered by purchases AND other actions (pickup, consume, etc.)
   - Explains variable count and Frame 3 occurrence

2. Shop interaction event
   - Records shop UI interactions
   - May include browsing, selling, or other non-purchase actions
   - Explains presence without purchases

3. Item effect or activation event
   - Records when items are equipped, used, or activated
   - Explains why Frame 0 (early game) has no 0x3D
   - Frame 3's event could be item consumption/activation

OPEN QUESTIONS:

1. Why does Frame 0 have no 0x3D events despite 2 purchases?
   - Possible: Early game startup state difference
   - Possible: Items purchased but not yet "activated"

2. Why does Frame 5 have 3 x 0x3D events for 2 purchases?
   - Possible: One purchase triggered multiple inventory updates
   - Possible: Additional item-related action occurred

3. What does Frame 3's lone 0x3D event represent?
   - Possible: Item consumption or removal
   - Possible: Delayed update from Frame 0 purchases
   - Possible: Shop visit without purchase

4. Is payload[1] always item ID in 0x3D events?
   - Only confirmed in Frame 6
   - Other frames didn't show this pattern
   - May be conditional or context-dependent

================================================================================
RECOMMENDATIONS FOR FURTHER ANALYSIS
================================================================================

1. Analyze more replays with different purchase patterns
   - Test: Buy single item per frame
   - Test: Buy multiple items simultaneously
   - Test: Sell items (if possible)
   - Compare 0x3D event counts and patterns

2. Investigate Frame 3's 0x3D event context
   - Check player actions in game recording
   - Determine what triggered 0x3D without purchase
   - May reveal true meaning of event

3. Examine all 0x3D events for payload[1] item ID pattern
   - Check if other events have item IDs at this position
   - Determine conditions for item ID presence

4. Cross-reference with other event types
   - Search for events that pair with 0x3D
   - Look for events at similar timestamps/offsets
   - Build event sequence diagram

5. Test hypothesis: Item activation/equip
   - Compare 0x3D events with item slot changes
   - Check if float values relate to item position in UI
   - Verify against game state changes

6. Analyze float values in 0x3D payloads
   - Compare with known coordinates or timestamps
   - Check for patterns in 128.50, 512.01, 515.00 values
   - Determine if spatial or temporal data

================================================================================
END OF ANALYSIS
================================================================================

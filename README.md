# VG Reverse Engineering

Vainglory: Community Edition (VG:CE) replay file (.vgr) binary format analysis and data extraction toolkit.

## Overview

This project reverse-engineers the VGR replay binary format to extract match data including player names, hero selections, team compositions, game modes, and entity interactions.

### Key Achievements

| Data | Extraction | Accuracy |
|------|-----------|----------|
| Player names / UUID | Player block marker parsing | 100% |
| Team assignment | Offset +0xD5 from player block | 100% |
| Game mode | GameMode string extraction | 100% |
| Hero selection | Offset +0xA9 uint16 LE | 100% (37 confirmed, 20 inferred) |
| Entity ID | Offset +0xA5 uint16 LE | 100% |
| Match length | Frame file count | 100% |
| Weapon items | FF FF FF FF pattern | 100% |
| Win/Loss | Turret destruction pattern | Partial (crystal detection only) |
| K/D/A | Event stream analysis | Research stage |

## Project Structure

```
vg/
  core/           # Core parsing library
    vgr_parser.py     # Main replay parser
    vgr_mapping.py    # Hero/Item ID mappings
    hero_matcher.py   # Binary hero detection
  analysis/       # Analysis scripts
    action_code_analyzer.py   # Event action code analysis
    win_loss_detector.py      # Match outcome detection
    hero_id_mapper.py         # Unknown hero ID inference
    player_kill_detector.py   # Kill event detection
    entity_network_mapper.py  # Entity interaction graph
    deep_event_mapper.py      # Event structure analysis
  tools/          # Utility scripts
    replay_batch_parser.py    # Batch replay processing
  output/         # Analysis results (JSON/MD)
  docs/           # Documentation
```

## Usage

```bash
# Parse a single replay
python vg/core/vgr_parser.py /path/to/replay.0.vgr

# Batch parse all replays
python vg/core/vgr_parser.py /path/to/replays/ -b

# Analyze action codes
python vg/analysis/action_code_analyzer.py /path/to/replay/

# Detect win/loss
python vg/analysis/win_loss_detector.py /path/to/replay.0.vgr
```

## VGR Binary Format

### Player Block Structure

Player blocks are identified by marker `DA 03 EE` (or `E0 03 EE`):

```
[Marker 3B] [Player Name] [padding...]
  +0xA5: Entity ID (uint16 LE)
  +0xA7: 00 00
  +0xA9: Hero ID (uint16 LE)
  +0xAB: Hero Hash (4 bytes, unique per hero)
  +0xAF: Skin/Account Hash (4 bytes)
  +0xD4: 02
  +0xD5: Team ID (01=left, 02=right)
```

### Hero ID Suffix Pattern

| Suffix | Era | Examples |
|--------|-----|---------|
| 0x00 | Original (2014) | Catherine(0xF200), Ringo(0xF300), Skaarf(0xFF00) |
| 0x01 | Season 1-3 | Ardan(0x0101), Baron(0x0501), Lorelai(0x9901) |
| 0x03 | Season 4+ | Caine(0x9303), Leo(0x9103), Ishtar(0x9A03) |

### Event Structure

```
[EntityID 2B LE] [00 00] [ActionCode 1B] [Payload 32B]
```

Action codes by game phase:
- `0x42`: Early game (frames 3-12)
- `0x43`: Mid game (frames 12-51)
- `0x44`: Late game (frames 51+)

## Disclaimer

This project is for **educational and research purposes only**. It analyzes locally-stored replay files generated by the game client. No server exploitation, network interception, or game modification is involved.

This project is not affiliated with Super Evil Megacorp (SEMC) or the Vainglory Community Edition team. All game assets and trademarks belong to their respective owners.

## License

MIT
